{% comment %}=== PRODUCT & ARTICLE STRUCTURED DATA ==={% endcomment %}
{% assign openthinking_seo_pages = 'product,article' | split: ',' %}
{%- if openthinking_seo_pages contains request.page_type -%}
{%- liquid
    capture openthinking_structured_data
        if request.page_type == 'product' 
            echo product | structured_data
        elsif request.page_type == 'article'
            echo article | structured_data
        endif
    endcapture
-%}
{%- if openthinking_structured_data != blank -%}
<script type="application/ld+json">{{ openthinking_structured_data | strip_html | strip }}</script>
{%- endif -%}
{%- endif -%}

{% comment %}=== BREADCRUMB SCHEMA (Product, Collection, Blog, Article pages only) ==={% endcomment %}
{%- if request.page_type == 'product' or request.page_type == 'collection' or request.page_type == 'blog' or request.page_type == 'article' -%}
<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [{
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "{{ shop.url }}"
    }
    {%- if request.page_type == 'product' -%}, {
      "@type": "ListItem",
      "position": 2,
      "name": {{ product.title | strip_html | strip_newlines | strip | json }},
      "item": "{{ shop.url }}{{ product.url }}"
    }
    {%- endif -%}
    {%- if request.page_type == 'collection' -%}, {
      "@type": "ListItem",
      "position": 2,
      "name": {{ collection.title | strip_html | strip_newlines | strip | json }},
      "item": "{{ shop.url }}{{ collection.url }}"
    }
    {%- endif -%}
    {%- if request.page_type == 'blog' -%}, {
      "@type": "ListItem",
      "position": 2,
      "name": {{ blog.title | strip_html | strip_newlines | strip | json }},
      "item": "{{ shop.url }}{{ blog.url }}"
    }
    {%- endif -%}
    {%- if request.page_type == 'article' -%}, {
      "@type": "ListItem",
      "position": 2,
      "name": {{ blog.title | strip_html | strip_newlines | strip | json }},
      "item": "{{ shop.url }}{{ blog.url }}"
    }, {
      "@type": "ListItem",
      "position": 3,
      "name": {{ article.title | strip_html | strip_newlines | strip | json }},
      "item": "{{ shop.url }}{{ article.url }}"
    }
    {%- endif -%}
    ]
}
</script>
{%- endif -%}

{% comment %}=== ORGANIZATION & WEBSITE SCHEMA (Home page only) ==={% endcomment %}
{%- if request.page_type == 'index' -%}
<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Organization",
    "name": {{ shop.name | json }},
    "url": "{{ shop.url }}",
    {%- if shop.brand.logo -%}
    "logo": {{ shop.brand.logo | image_url: width: shop.brand.logo.width | prepend: "https:" | json }},
    {%- endif -%}
    "description": {{ shop.description | default: shop.brand.short_description | strip_html | strip_newlines | strip | json }},
    "brand": {
        "@type": "Brand",
        "name": {{ shop.name | json }}
    },
    "founder": {
        "@type": "Person",
        "name": "Farha Jha"
    }
    {%- if shop.brand.metafields.social_links.size > 0 -%},
    "sameAs": [
        {%- for social_link in shop.brand.metafields.social_links -%}
        {{- social_link.last.value | json -}}{%- unless forloop.last -%},{%- endunless -%}
        {%- endfor -%}
    ]
    {%- endif -%},
    "contactPoint": {
        "@type": "ContactPoint",
        "contactType": "customer support",
        "email": "contact@ferafive.com",
        "availableLanguage": "English"
    }
}
</script>

<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "WebSite",
    "url": "{{ shop.url }}",
    "name": {{ shop.name | json }},
    "description": {{ page_description | default: shop.description | default: shop.brand.short_description | strip_html | strip_newlines | strip | json }},
    "potentialAction": {
        "@type": "SearchAction",
        "target": "{{ shop.url }}/search?q={search_term_string}",
        "query-input": "required name=search_term_string"
    }
}
</script>
{%- endif -%}